<!doctype html>
<html lang="en-US">
<meta charset="UTF-8" />

<head>
    <meta name="viewport"
        content="width=device-width, initial-scale=1" />
    <link rel='stylesheet'
        href='wp-content/plugins/gutenberg/build/block-library/styleb3b9.css?ver=16.9.0' />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        rel="stylesheet">
    <link rel='stylesheet'
        href='wp-content/themes/hever/stylee2c1.css?ver=1.5.15' />
    <style>
        body {
            --wp--preset--spacing--30: 0.67rem;
            background-color: #000000;
            color: rgb(255, 255, 255);
        }

        .wp-block-button__link {
            border-radius: 100px;
            padding-top: var(--wp--preset--spacing--30);
            padding-bottom: var(--wp--preset--spacing--30);
        }

        p {
            font-size: 12px;
        }

        .button-container {
            display: flex;
            justify-content: center;
        }

        .button-container button {
            background-color: rgba(0, 0, 0, 0);
        }

        .video-player {
            width: 100%;
        }

        #video-counter {
            font-size: 12px;
            display: flex;
            justify-content: center;
            font-weight: bold;
        }

        #audio-visualizer {
            position: absolute;
            top: 0;
            left: 0;
            z-index: -10;
        }
    </style>
</head>

<body class="singular">
    <div id="audio-visualizer"></div>
    <main class="site-main">
        <article class="hentry entry">
            <header class="entry-header responsive-max-width">
                <h1 class="entry-title">Generative Music</h1>
            </header>
            <div class="entry-content">
                <div class="wp-block-buttons">
                    <div
                        class="wp-block-button has-custom-width wp-block-button__width-100 has-custom-font-size is-style-outline has-small-font-size">
                        <a class="wp-block-button__link has-background-color has-foreground-background-color has-text-color has-background has-link-color wp-element-button"
                            href="../index.html">Homepage</a>
                    </div>
                </div>
                <p class="has-text-align-center">Lyrics, vocals, instruments, images were
                    generated by AI. Rest done manually, audio refinements in Audition,
                    visuals in Photoshop, animations with motion graphics in After Effects and JavaScript,
                    video editing in Premiere Pro. Finally downscaled with
                    Handbrake.</p>
                <div class="button-container">
                    <button id="play"><i class="fas fa-play"></i></button>
                    <button id="pause"><i class="fas fa-pause"></i></button>
                    <button id="stop"><i class="fas fa-stop"></i></button>
                    <button id="previous"><i class="fas fa-backward"></i></button>
                    <button id="next"><i class="fas fa-forward"></i></button>
                </div>
                <div id="video-counter"></div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/yudh.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/rifl.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/carv.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/apart.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/poten.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/crack.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/sands.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/drift.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/vile.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/river.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/falling.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/opposing.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/krishna.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/rain.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/ruins.mp4">
                    </video>
                </div>
                <div class="video-container">
                    <video class="video-player"
                        id="video">
                        <source src="wp-content/uploads/krwa.mp4">
                    </video>
                </div>
            </div>
        </article>
    </main>
    <script>
        const originalVideosOrder = Array.from(document.querySelectorAll('.video-container'));
        const videoContainers = document.querySelectorAll('.video-container');
        const videoCounter = document.getElementById('video-counter');
        const videos = document.querySelectorAll('video');
        const playButton = document.getElementById('play');
        const pauseButton = document.getElementById('pause');
        const stopButton = document.getElementById('stop');
        const nextButton = document.getElementById('next');
        const previousButton = document.getElementById('previous');
        let currentVideoIndex = 0;
        let currentVideo = videos[currentVideoIndex];
        const audioVisualizer = document.getElementById('audio-visualizer');
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const analyser = audioContext.createAnalyser();
        analyser.fftSize = 32;
        const bufferLength = analyser.frequencyBinCount;
        const dataArray = new Uint8Array(bufferLength);
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        audioVisualizer.appendChild(canvas);
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        function updateVisualizer() {
            const alphaValue = 0.05;
            ctx.globalAlpha = alphaValue;
            analyser.getByteFrequencyData(dataArray);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const lowFrequencyData = dataArray.slice(0, bufferLength / 2);
            const highFrequencyData = dataArray.slice(bufferLength / 2);
            const lowAvg = lowFrequencyData.reduce((sum, value) => sum + value, 0) / lowFrequencyData.length;
            const highAvg = highFrequencyData.reduce((sum, value) => sum + value, 0) / highFrequencyData.length;
            const outerRadius = Math.max(1, lowAvg);
            const innerRadius = Math.max(1, highAvg);
            const gradient = ctx.createRadialGradient(canvas.width / 2, canvas.height / 2, innerRadius, canvas.width / 2, canvas.height / 2, outerRadius);
            gradient.addColorStop(0, 'rgba(5, 5, 5, 1)');
            gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(canvas.width / 2, canvas.height / 2, outerRadius, 0, Math.PI * 2);
            ctx.fill();
            const numSpirals = lowAvg / 100;
            const maxRadius = canvas.height;
            const spiralStep = 1 * Math.PI / numSpirals;
            const pointsPerSpiral = 10;
            for (let i = 0; i < numSpirals; i++) {
                ctx.lineWidth = 1;
                ctx.strokeStyle = `rgba(255, 255, 255, ${1 - i / numSpirals})`;
                ctx.beginPath();
                ctx.stroke();
            }
            const circleCount = Math.max(1, Math.floor(lowAvg / 1));
            for (let i = 0; i < circleCount; i++) {
                const radius = (i + 1) * outerRadius * 0.1;
                const alpha = Math.max(0.1, 1 - i / circleCount);
                ctx.beginPath();
                ctx.arc(canvas.width / 2, canvas.height / 2, radius, 0, Math.PI * 2);
                ctx.strokeStyle = `rgba(255, 255, 255, ${alpha})`;
                ctx.lineWidth = 1;
                ctx.stroke();
            }
            const fractalLayers = Math.max(1, Math.floor(highAvg / 10));
            const fractalAngleShift = Math.PI / 1;
            const fractalMaxRadius = Math.max(canvas.width, canvas.height) * 0.25;
            for (let layer = 0; layer < fractalLayers; layer++) {
                ctx.beginPath();
                ctx.lineWidth = 1;
                ctx.strokeStyle = `rgba(255, 255, 255, ${0.5 - layer / fractalLayers})`;
                for (let i = 0; i < 1000; i++) {
                    const angle = i * 0.1 + (layer * fractalAngleShift);
                    const radius = (i / 1000) * fractalMaxRadius * Math.sin(i * 0.05);
                    const x = canvas.width / 2 + Math.cos(angle) * radius;
                    const y = canvas.height / 2 + Math.sin(angle) * radius;
                    ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
            const arcCount = Math.max(2, Math.floor(lowAvg / 10));
            for (let i = 0; i < arcCount; i++) {
                const angleStart = Math.PI * (i * 0.5);
                const angleEnd = angleStart + Math.PI * 0.5;
                const radius = outerRadius * (0.5 + i / arcCount);
                ctx.beginPath();
                ctx.arc(canvas.width / 2, canvas.height / 2, radius, angleStart, angleEnd);
                ctx.lineWidth = 1;
                ctx.strokeStyle = `rgba(255, 255, 255, ${1 - i / arcCount})`;
                ctx.stroke();
            }
            setTimeout(() => requestAnimationFrame(updateVisualizer), 1000 / 24);
        }
        function setUpAudioSource() {
            const source = audioContext.createMediaElementSource(currentVideo);
            source.connect(analyser);
            analyser.connect(audioContext.destination);
            updateVisualizer();
        }
        function playVideo() {
            currentVideo.play();
            setUpAudioSource();
        }
        function pauseVideo() {
            currentVideo.pause();
        }
        function stopVideos() {
            currentVideoIndex = 0;
            updateCurrentVideo();
            videos.forEach((video) => {
                video.pause();
                video.currentTime = 0;
            });
        }
        function nextVideo() {
            videos.forEach((video) => {
                video.pause();
                video.currentTime = 0;
            });
            currentVideoIndex = (currentVideoIndex + 1) % videos.length;
            updateCurrentVideo();
            setUpAudioSource();
            currentVideo.play();
        }
        function previousVideo() {
            videos.forEach((video) => {
                video.pause();
                video.currentTime = 0;
            });
            currentVideoIndex = (currentVideoIndex - 1 + videos.length) % videos.length;
            updateCurrentVideo();
            setUpAudioSource();
            currentVideo.play();
        }
        function updateCurrentVideo() {
            videos.forEach((video, index) => {
                video.style.display = (index === currentVideoIndex) ? 'block' : 'none';
            });
            currentVideo = videos[currentVideoIndex];
            videoCounter.textContent = `Song ${currentVideoIndex + 1} of ${videoContainers.length}`;
        }
        playButton.addEventListener('click', playVideo);
        pauseButton.addEventListener('click', pauseVideo);
        stopButton.addEventListener('click', stopVideos);
        nextButton.addEventListener('click', nextVideo);
        previousButton.addEventListener('click', previousVideo);
        updateCurrentVideo();    
    </script>
</body>

</html>